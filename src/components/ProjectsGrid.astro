---
import { useTranslations, getLangFromUrl } from "../i18n/translate";
import projectsData from "../data/projects.json";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section class="projects-section">
    <h2 class="projects-title">{t("projects.title")}</h2>

    <div class="projects-list">
        {
            projectsData.map((project) => (
                <a href={project.link} target="_blank" class="project-card">
                    <div class="project-image">
                        <img src={project.image} alt={`Logo de ${project.name}`} />
                    </div>
                    <div class="project-content">
                        <span class="project-name">{project.name}</span>
                        <p class="project-description">{project.description[lang]}</p>
                    </div>
                </a>
            ))
        }
    </div>

    <!-- CTA para servicios -->
    <div class="services-cta">
        <h3>{t("services.cta.title")}</h3>
        <p>{t("services.cta.description")}</p>
        <a href="https://services.crobf.tech" target="_blank" class="cta-button">
            {t("services.cta.button")}
        </a>
    </div>
</section>

<style>
    .projects-section {
        margin: 2rem 0;
    }

    .projects-title {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        color: var(--black);
    }

    .projects-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .project-card {
        background-color: rgb(233, 233, 233);
        padding: 0.5rem 1rem;
        border-radius: 10px;
        display: flex;
        flex-direction: row;
        gap: 1rem;
        transition:
            transform 300ms ease,
            background-color 300ms ease;
        text-decoration: none;
        color: currentColor;
        align-items: center;
    }

    .project-card:hover {
        background-color: rgba(201, 201, 201, 0.9);
        transform: scale(1.03);
    }

    .project-card:hover .project-name {
        text-decoration: underline;
    }

    .project-image {
        max-width: 60px;
        min-width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .project-image img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    .project-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .project-name {
        font-weight: bold;
        font-size: 1.3rem;
        margin: 0;
        color: var(--black);
    }

    .project-description {
        font-size: 0.9rem;
        margin: 0;
        color: #666;
        line-height: 1.4;
    }

    /* CTA para servicios */
    .services-cta {
        background: var(--accent);
        padding: 2rem;
        border-radius: 12px;
        text-align: center;
        color: white;
        margin-top: 2rem;
        border: 2px solid var(--accent);
    }

    .services-cta h3 {
        font-size: 1.5rem;
        margin: 0 0 0.5rem 0;
        color: white;
        font-weight: 600;
    }

    .services-cta p {
        font-size: 1rem;
        margin: 0 0 1.5rem 0;
        line-height: 1.5;
        color: rgba(255, 255, 255, 0.95);
    }

    .cta-button {
        display: inline-block;
        background: white;
        color: var(--accent);
        padding: 0.75rem 2rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .cta-button:hover {
        background: transparent;
        color: white;
        border-color: white;
    }

    /* Dark mode */
    html.dark .project-card {
        background-color: rgba(255, 255, 255, 0.08);
        color: #f7fafc;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    html.dark .project-card:hover {
        background-color: rgba(255, 255, 255, 0.12);
        color: white;
    }

    html.dark .project-name {
        color: #f7fafc;
        font-weight: 700;
    }

    html.dark .project-description {
        color: #e2e8f0;
    }

    html.dark .services-cta {
        background: #2d3748;
        border-color: #4a5568;
    }

    html.dark .services-cta h3 {
        color: #f7fafc;
    }

    html.dark .services-cta p {
        color: #e2e8f0;
    }

    html.dark .cta-button {
        background: #1a202c;
        color: #ffffff;
        font-weight: 700;
    }

    /* Responsive */
    @media (max-width: 600px) {
        .project-card {
            flex-direction: column;
            text-align: center;
            padding: 1rem;
        }

        .project-image {
            max-width: 80px;
            min-width: 80px;
            height: 80px;
        }

        .services-cta {
            padding: 1.5rem;
        }

        .services-cta h3 {
            font-size: 1.3rem;
        }
    }
</style>
